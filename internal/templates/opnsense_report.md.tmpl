# OPNsense Configuration Summary

## System Information
- **Hostname**: {{ .System.Hostname }}
- **Domain**: {{ .System.Domain }}
- **Platform**: OPNsense {{ .System.Firmware.Version }}
- **Generated On**: {{ .Generated }}
- **Parsed By**: opnFocus v{{ .ToolVersion }}

---

## Table of Contents

- [Interfaces](#interfaces)
- [Firewall Rules](#firewall-rules)
- [NAT Rules](#nat-rules)
- [DHCP Services](#dhcp-services)
- [DNS Resolver](#dns-resolver)
- [OpenVPN](#openvpn)
- [System Users](#system-users)
- [Services & Daemons](#services--daemons)
- [Tunables](#tunables)
- [System Notes](#system-notes)

---

## Interfaces

| Name | Description | IP Address | CIDR | Enabled |
|------|-------------|------------|------|---------|
{{- range $name, $iface := .Interfaces.Items }}
| `{{ $name }}` | `{{ if $iface.Descr }}{{ $iface.Descr }}{{ else }}{{ $iface.If }}{{ end }}` | `{{ $iface.IPAddr }}` | /{{ $iface.Subnet }} | {{ if $iface.Enable }}[x]{{ else }}[ ]{{ end }} |
{{- end }}

---

## Firewall Rules

### WAN

| # | Action | Proto | Source | Destination | Description |
|---|--------|-------|--------|-------------|-------------|
{{- range $index, $rule := .Filter.Rule }}
{{- if eq $rule.Interface "wan" }}
| {{ add $index 1 }} | {{ $rule.Type }} | {{ $rule.IPProtocol }} | {{ $rule.Source.Network }} | {{ $rule.Destination.Network }} | `{{ $rule.Descr }}` |
{{- end }}
{{- end }}

### LAN

| # | Action | Proto | Source | Destination | Description |
|---|--------|-------|--------|-------------|-------------|
{{- range $index, $rule := .Filter.Rule }}
{{- if eq $rule.Interface "lan" }}
| {{ add $index 1 }} | {{ $rule.Type }} | {{ $rule.IPProtocol }} | {{ $rule.Source.Network }} | {{ $rule.Destination.Network }} | `{{ $rule.Descr }}` |
{{- end }}
{{- end }}

---

## NAT Rules

| Interface | Protocol | Source | Destination | NAT IP | Description |
|-----------|----------|--------|-------------|--------|-------------|
{{- if .Nat.Outbound.Mode }}
| Outbound | All | Any | Any | {{ .Nat.Outbound.Mode }} | Outbound NAT |
{{- end }}

---

## DHCP Services

| Interface | Start IP | End IP | Domain | DNS Servers |
|-----------|----------|--------|--------|--------------|
{{- range $name, $dhcp := .Dhcpd.Items }}
| {{ $name }} | {{ $dhcp.Range.From }} | {{ $dhcp.Range.To }} | - | - |
{{- end }}

### Static Leases

| Hostname | MAC Address | IP | Description |
|----------|-------------|----|-------------|
{{- $hasStaticLeases := false }}
{{- range $name, $dhcp := .Dhcpd.Items }}
{{- if $dhcp.Staticmap }}
{{- $hasStaticLeases = true }}
{{- range $dhcp.Staticmap }}
| `{{ .Hostname }}` | `{{ .Mac }}` | `{{ .IPAddr }}` | `{{ .Descr }}` |
{{- end }}
{{- end }}
{{- end }}
{{- if not $hasStaticLeases }}
| No static leases configured | - | - | - |
{{- end }}

---

## DNS Resolver

- **Enabled**: {{ if .Unbound.Enable }}[x]{{ else }}[ ]{{ end }}
{{- if .Unbound.Dnssec }}
- **DNSSEC**: {{ if .Unbound.Dnssec }}[x]{{ else }}[ ]{{ end }}
{{- end }}
{{- if .Unbound.Dnssecstripped }}
- **DNSSEC Stripped**: {{ if .Unbound.Dnssecstripped }}[x]{{ else }}[ ]{{ end }}
{{- end }}

---

## OpenVPN

| Name | Mode | Local IP | Remote Net | Enabled |
|------|------|----------|------------|---------|
{{- if .OpenVPN.Servers }}
{{- range .OpenVPN.Servers }}
| `{{ .Description }}` | {{ .Mode }} | {{ .Local_port }} | {{ .Remote_network }} | [x] |
{{- end }}
{{- end }}
{{- if .OpenVPN.Clients }}
{{- range .OpenVPN.Clients }}
| `{{ .Description }}` | {{ .Mode }} | {{ .Server_addr }}:{{ .Server_port }} | - | [x] |
{{- end }}
{{- end }}
{{- if and (not .OpenVPN.Servers) (not .OpenVPN.Clients) }}
| No OpenVPN configured | - | - | - | [ ] |
{{- end }}

---

## System Users

| Username | UID | Group | Shell | Disabled |
|----------|-----|-------|--------|----------|
{{- range .System.User }}
| `{{ .Name }}` | {{ .UID }} | {{ .Groupname }} | - | {{ if .Disabled }}[x]{{ else }}[ ]{{ end }} |
{{- end }}

---

## Services & Daemons

| Service | Enabled | Notes |
|---------|---------|-------|
| SNMP | {{ if .Snmpd.ROCommunity }}[x]{{ else }}[ ]{{ end }} | Community: {{ .Snmpd.ROCommunity }} |
| Unbound DNS | {{ if .Unbound.Enable }}[x]{{ else }}[ ]{{ end }} | {{ if .Unbound.Dnssec }}DNSSEC: [x]{{ if .Unbound.Dnssecstripped }}, Stripped: [x]{{ end }}{{ else }}DNSSEC: [ ]{{ end }} |
| NTP | {{ if .Ntpd.Prefer }}[x]{{ else }}[ ]{{ end }} | Prefer: {{ .Ntpd.Prefer }} |

---

## System Tunables

| Name | Value | Description |
|------|--------|-------------|
{{- range .Sysctl }}
| `{{ .Tunable }}` | `{{ .Value }}` | `{{ .Descr }}` |
{{- end }}

---

## System Notes

{{- if .System.Notes }}
{{- range .System.Notes }}
```text
{{ . }}
```
{{- end }}
{{- else }}
```text
No system notes configured
```
{{- end }}

---

*Generated by opnFocus. No telemetry. No nonsense.*
